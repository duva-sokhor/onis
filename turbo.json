{
  "$schema": "https://turbo.build/schema.json",
  "globalDependencies": ["**/.env.*local"],
  "pipeline": {
    "build": {
      "dependsOn": ["^build"],
      "outputs": [".next/**", "!.next/cache/**"]
    },
    "lint": {},
    "dev": {
      "dependsOn": ["//#env-check:common"],
      "cache": false,
      "persistent": true
    },
    "@onis/prisma#build": {
      "cache": false,
      "dependsOn": ["post-install"]
    },
    "@onis/prisma#db-up": {
      "cache": false
    },
    "@onis/web#build": {
      "dependsOn": ["^build"],
      "outputs": [".next/**"],
      "env": [
        "NEXT_PUBLIC_WEBAPP_URL",
        "NEXT_PUBLIC_API_URL",
        "NEXT_PUBLIC_GRAPHQL_URL"
      ]
    },
    "post-install": {
      "dependsOn": [],
      "outputs": ["../../node_modules/@prisma/client/**"],
      "inputs": ["./schema.prisma", "./prisma/schema.prisma"],
      "env": ["PRISMA_GENERATE_DATAPROXY"]
    },
    "clean": {
      "cache": false,
      "outputs": ["dist/**", "build/**"]
    },
    "//#env-check:common": {
      "cache": false,
      "inputs": ["./.env.example", "./.env"],
      "outputs": ["./.env"]
    }
  }
}
